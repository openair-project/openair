<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Import data from Imperial College London networks ‚Äî importImperial ‚Ä¢ openair</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="‚Äùimage/svg+xml‚Äù" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Nunito_Sans-0.4.10/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Import data from Imperial College London networks ‚Äî importImperial"><meta name="description" content="Function for importing hourly mean data from Imperial College London
networks, formerly the King's College London networks. Files are imported
from a remote server operated by Imperial College London that provides air
quality data files as R data objects."><meta property="og:description" content="Function for importing hourly mean data from Imperial College London
networks, formerly the King's College London networks. Files are imported
from a remote server operated by Imperial College London that provides air
quality data files as R data objects."><meta property="og:image" content="https://openair-project.github.io/openair/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">openair</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.19.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/openair.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/openair-project" aria-label="Website"><span class="fa fa-globe"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://openair-project.github.io/book/" aria-label="Book"><span class="fa fa-book"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/openair-project/openair/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-packages" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Packages</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-packages"><li><h6 class="dropdown-header" data-toc-skip>Data Analysis</h6></li>
    <li><a class="dropdown-item" href="https://openair-project.github.io/openair/">üß≠ openair</a></li>
    <li><a class="dropdown-item" href="https://openair-project.github.io/openairmaps/">üó∫Ô∏è openairmaps</a></li>
    <li><a class="external-link dropdown-item" href="https://openair-project.github.io/deweather/">üìâ deweather</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Data Access</h6></li>
    <li><a class="external-link dropdown-item" href="https://openair-project.github.io/worldmet/">üçÉ worldmet</a></li>
    <li><a class="external-link dropdown-item" href="https://openair-project.github.io/euroaq/">üåç euroaq</a></li>
    <li><a class="external-link dropdown-item" href="https://openair-project.github.io/ukaq/">üëë ukaq</a></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Import data from Imperial College London networks</h1>
      <small class="dont-index">Source: <a href="https://github.com/openair-project/openair/blob/main/R/importImperial.R" class="external-link"><code>R/importImperial.R</code></a></small>
      <div class="d-none name"><code>importImperial.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function for importing hourly mean data from Imperial College London
networks, formerly the King's College London networks. Files are imported
from a remote server operated by Imperial College London that provides air
quality data files as R data objects.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">importImperial</span><span class="op">(</span></span>
<span>  site <span class="op">=</span> <span class="st">"my1"</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2009</span>,</span>
<span>  pollutant <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  meta <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  meteo <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  extra <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  units <span class="op">=</span> <span class="st">"mass"</span>,</span>
<span>  to_narrow <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">importKCL</span><span class="op">(</span></span>
<span>  site <span class="op">=</span> <span class="st">"my1"</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2009</span>,</span>
<span>  pollutant <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  met <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  units <span class="op">=</span> <span class="st">"mass"</span>,</span>
<span>  extra <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  meta <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  to_narrow <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-site">site<a class="anchor" aria-label="anchor" href="#arg-site"></a></dt>
<dd><p>Site code of the network site to import e.g. "my1" is Marylebone
Road. Several sites can be imported with <code>site = c("my1", "kc1")</code> ‚Äî
to import Marylebone Road and North Kensignton for example.</p></dd>


<dt id="arg-year">year<a class="anchor" aria-label="anchor" href="#arg-year"></a></dt>
<dd><p>Year(s) to import. To import a series of years use, e.g.,
<code>2000:2020</code>. To import several specific years use <code>year = c(2000, 2010, 2020)</code>.</p></dd>


<dt id="arg-pollutant">pollutant<a class="anchor" aria-label="anchor" href="#arg-pollutant"></a></dt>
<dd><p>Pollutants to import. If omitted will import all pollutants
from a site. To import only NOx and NO2 for example use <code>pollutant = c("nox", "no2")</code>. Pollutant names can be upper or lower case.</p></dd>


<dt id="arg-meta">meta<a class="anchor" aria-label="anchor" href="#arg-meta"></a></dt>
<dd><p>Append metadata columns to data for each selected <code>site</code>?
Defaults to <code>FALSE</code>. Columns are defined using <code>meta_columns</code>.</p></dd>


<dt id="arg-meteo-met">meteo, met<a class="anchor" aria-label="anchor" href="#arg-meteo-met"></a></dt>
<dd><p>Should meteorological data be added to the import data? The
default is <code>FALSE</code>. If <code>TRUE</code> wind speed (m/s), wind direction
(degrees), solar radiation and rain amount are available. See details
below.</p></dd>


<dt id="arg-extra">extra<a class="anchor" aria-label="anchor" href="#arg-extra"></a></dt>
<dd><p>Defaults to <code>FALSE</code>. When <code>TRUE</code>, returns additional data.</p></dd>


<dt id="arg-units">units<a class="anchor" aria-label="anchor" href="#arg-units"></a></dt>
<dd><p>By default the returned data frame expresses the units in mass
terms (ug/m3 for NOx, NO2, O3, SO2; mg/m3 for CO). Use <code>units = "volume"</code> to use ppb etc. PM10_raw TEOM data are multiplied by 1.3 and
PM2.5 have no correction applied. See details below concerning PM10
concentrations.</p></dd>


<dt id="arg-to-narrow">to_narrow<a class="anchor" aria-label="anchor" href="#arg-to-narrow"></a></dt>
<dd><p>Return the data in a "narrow"/"long"/"tidy" format? By
default the returned data is "wide" and has a column for each
pollutant/variable. When <code>to_narrow = TRUE</code> the data are returned with a
column identifying the pollutant name and a column containing the
corresponding concentration/statistic. Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>Show a progress bar when many sites/years are being imported?
Defaults to <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a data frame of hourly mean values with date in POSIXct class
and time zone GMT.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>importImperial()</code> function has been written to make it easy to import
data from the Imperial College London air pollution networks. Imperial have
provided .RData files (R workspaces) of all individual sites and years for
the Imperial networks. These files are updated on a weekly basis. This
approach requires a link to the Internet to work.</p>
<p>There are several advantages over the web portal approach where .csv files
are downloaded. First, it is quick to select a range of sites, pollutants and
periods (see examples below). Second, storing the data as .RData objects is
very efficient as they are about four times smaller than .csv files ‚Äî which
means the data downloads quickly and saves bandwidth. Third, the function
completely avoids any need for data manipulation or setting time formats,
time zones etc. Finally, it is easy to import many years of data beyond the
current limit of about 64,000 lines. The final point makes it possible to
download several long time series in one go. The function also has the
advantage that the proper site name is imported and used in `openair‚Äú
functions.</p>
<p>The site codes and pollutant names can be upper or lower case. The function
will issue a warning when data less than six months old is downloaded, which
may not be ratified.</p>
<p>The data are imported by stacking sites on top of one another and will have
field names <code>date</code>, <code>site</code>, <code>code</code> (the site code) and
pollutant(s). Sometimes it is useful to have columns of site data. This can
be done using the <code><a href="https://rdrr.io/r/stats/reshape.html" class="external-link">reshape()</a></code> function ‚Äî see examples below.</p>
<p>The situation for particle measurements is not straightforward given the
variety of methods used to measure particle mass and changes in their use
over time. The <code>importImperial()</code> function imports two measures of PM10
where available. <code>PM10_raw</code> are TEOM measurements with a 1.3 factor
applied to take account of volatile losses. The <code>PM10</code> data is a current
best estimate of a gravimetric equivalent measure as described below. NOTE!
many sites have several instruments that measure PM10 or PM2.5. In the case
of FDMS measurements, these are given as separate site codes (see below). For
example "MY1" will be TEOM with VCM applied and "MY7" is the FDMS data.</p>
<p>Where FDMS data are used the volatile and non-volatile components are
separately reported i.e. v10 = volatile PM10, v2.5 = volatile PM2.5, nv10 =
non-volatile PM10 and nv2.5 = non-volatile PM2.5. Therefore, PM10 = v10 +
nv10 and PM2.5 = v2.5 + nv2.5.</p>
<p>For the assessment of the EU Limit Values, PM10 needs to be measured using
the reference method or one shown to be equivalent to the reference method.
Defra carried out extensive trials between 2004 and 2006 to establish which
types of particulate analysers in use in the UK were equivalent. These trials
found that measurements made using Partisol, FDMS, BAM and SM200 instruments
were shown to be equivalent to the PM10 reference method. However, correction
factors need to be applied to measurements from the SM200 and BAM
instruments. Importantly, the TEOM was demonstrated as not being equivalent
to the reference method due to the loss of volatile PM, even when the 1.3
correction factor was applied.  The Volatile Correction Model (VCM) was
developed for Defra at King's College to allow measurements of PM10 from TEOM
instruments to be converted to reference equivalent; it uses the measurements
of volatile PM made using nearby FDMS instruments to correct the measurements
made by the TEOM. It passed the equivalence testing using the same
methodology used in the Defra trials and is now the recommended method for
correcting TEOM measurements (Defra, 2009). VCM correction of TEOM
measurements can only be applied after 1st January 2004, when sufficiently
widespread measurements of volatile PM became available. The 1.3 correction
factor is now considered redundant for measurements of PM10 made after 1st
January 2004.  Further information on the VCM can be found at
<a href="http://www.volatile-correction-model.info/" class="external-link">http://www.volatile-correction-model.info/</a>.</p>
<p>All PM10 statistics on the LondonAir web site, including the bulletins and
statistical tools (and in the RData objects downloaded using
<code>importImperial()</code>), now report PM10 results as reference equivalent. For
PM10 measurements made by BAM and SM200 analysers the applicable correction
factors have been applied. For measurements from TEOM analysers the 1.3
factor has been applied up to 1st January 2004, then the VCM method has been
used to convert to reference equivalent.</p>
<p>The meteorological data are meant to represent 'typical' conditions in
London, but users may prefer to use their own data. The data provide a an
estimate of general meteorological conditions across Greater London. For
meteorological species (wd, ws, rain, solar) each data point is formed by
averaging measurements from a subset of LAQN monitoring sites that have been
identified as having minimal disruption from local obstacles and a long term
reliable dataset. The exact sites used varies between species, but include
between two and five sites per species. Therefore, the data should represent
'London scale' meteorology, rather than local conditions.</p>
<p><code>importKCL()</code> is equivalent to <code>importImperial()</code> and is provided for
back-compatibility reasons only. New users should use <code>importImperial()</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other import functions:
<code><a href="importADMS.html">importADMS</a>()</code>,
<code><a href="importUKAQ-wrapper.html">importAURN</a>()</code>,
<code><a href="importEurope.html">importEurope</a>()</code>,
<code><a href="importMeta.html">importMeta</a>()</code>,
<code><a href="importTraj.html">importTraj</a>()</code>,
<code><a href="importUKAQ.html">importUKAQ</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>David Carslaw and Ben Barratt</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## import all pollutants from Marylebone Rd from 1990:2009</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">mary</span> <span class="op">&lt;-</span> <span class="fu">importImperial</span><span class="op">(</span>site <span class="op">=</span> <span class="st">"my1"</span>, year <span class="op">=</span> <span class="fl">2000</span><span class="op">:</span><span class="fl">2009</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## import nox, no2, o3 from Marylebone Road and North Kensington for 2000</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">thedata</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu">importImperial</span><span class="op">(</span></span></span>
<span class="r-in"><span>    site <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"my1"</span>, <span class="st">"kc1"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    year <span class="op">=</span> <span class="fl">2000</span>,</span></span>
<span class="r-in"><span>    pollutant <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nox"</span>, <span class="st">"no2"</span>, <span class="st">"o3"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## import met data too...</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">my1</span> <span class="op">&lt;-</span> <span class="fu">importImperial</span><span class="op">(</span>site <span class="op">=</span> <span class="st">"my1"</span>, year <span class="op">=</span> <span class="fl">2008</span>, meteo <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Carslaw, Jack Davison, Karl Ropkins.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

