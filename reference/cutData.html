<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Function to split data in different ways for conditioning ‚Äî cutData ‚Ä¢ openair</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="‚Äùimage/svg+xml‚Äù" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Nunito_Sans-0.4.10/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Function to split data in different ways for conditioning ‚Äî cutData"><meta name="description" content="Utility function to split data frames up in various ways for conditioning
plots. Widely used by many openair functions usually through the option
type."><meta property="og:description" content="Utility function to split data frames up in various ways for conditioning
plots. Widely used by many openair functions usually through the option
type."><meta property="og:image" content="https://openair-project.github.io/openair/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">openair</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.19.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/openair.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/openair-project" aria-label="Website"><span class="fa fa-globe"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://openair-project.github.io/book/" aria-label="Book"><span class="fa fa-book"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/openair-project/openair/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-packages" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Packages</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-packages"><li><h6 class="dropdown-header" data-toc-skip>Data Analysis</h6></li>
    <li><a class="dropdown-item" href="https://openair-project.github.io/openair/">üß≠ openair</a></li>
    <li><a class="dropdown-item" href="https://openair-project.github.io/openairmaps/">üó∫Ô∏è openairmaps</a></li>
    <li><a class="external-link dropdown-item" href="https://openair-project.github.io/deweather/">üìâ deweather</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Data Access</h6></li>
    <li><a class="external-link dropdown-item" href="https://openair-project.github.io/worldmet/">üçÉ worldmet</a></li>
    <li><a class="external-link dropdown-item" href="https://openair-project.github.io/euroaq/">üåç euroaq</a></li>
    <li><a class="external-link dropdown-item" href="https://openair-project.github.io/ukaq/">üëë ukaq</a></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Function to split data in different ways for conditioning</h1>
      <small class="dont-index">Source: <a href="https://github.com/openair-project/openair/blob/main/R/cutData.R" class="external-link"><code>R/cutData.R</code></a></small>
      <div class="d-none name"><code>cutData.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Utility function to split data frames up in various ways for conditioning
plots. Widely used by many <code>openair</code> functions usually through the option
<code>type</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cutData</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>  names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  suffix <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hemisphere <span class="op">=</span> <span class="st">"northern"</span>,</span>
<span>  n.levels <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  start.day <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  is.axis <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  local.tz <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  latitude <span class="op">=</span> <span class="fl">51</span>,</span>
<span>  longitude <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span>,</span>
<span>  drop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"default"</span>, <span class="st">"empty"</span>, <span class="st">"outside"</span>, <span class="st">"none"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A data frame containing a field <code>date</code>.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>A string giving the way in which the data frame should be split.
Pre-defined values are: <code>"default"</code>, <code>"year"</code>, <code>"hour"</code>, <code>"month"</code>,
<code>"season"</code>, <code>"weekday"</code>, <code>"site"</code>, <code>"weekend"</code>, <code>"monthyear"</code>,
<code>"daylight"</code>, <code>"dst"</code> (daylight saving time).</p>
<p><code>type</code> can also be the name of a numeric or factor. If a numeric column
name is supplied <code>cutData()</code> will split the data into four quantiles.
Factors levels will be used to split the data without any adjustment.</p></dd>


<dt id="arg-names">names<a class="anchor" aria-label="anchor" href="#arg-names"></a></dt>
<dd><p>By default, the columns created by <code>cutData()</code> are named after
their <code>type</code> option. Specifying <code>names</code> defines other names for the
columns, which map onto the <code>type</code> options in the same order they are
given. The length of <code>names</code> should therefore be equal to the length of
<code>type</code>.</p></dd>


<dt id="arg-suffix">suffix<a class="anchor" aria-label="anchor" href="#arg-suffix"></a></dt>
<dd><p>If <code>name</code> is not specified, <code>suffix</code> will be appended to any
added columns that would otherwise overwrite existing columns. For example,
<code>cutData(mydata, "nox", suffix = "_cuts")</code> would append a <code>nox_cuts</code> column
rather than overwriting <code>nox</code>.</p></dd>


<dt id="arg-hemisphere">hemisphere<a class="anchor" aria-label="anchor" href="#arg-hemisphere"></a></dt>
<dd><p>Can be <code>"northern"</code> or <code>"southern"</code>, used to split data
into seasons.</p></dd>


<dt id="arg-n-levels">n.levels<a class="anchor" aria-label="anchor" href="#arg-n-levels"></a></dt>
<dd><p>Number of quantiles to split numeric data into.</p></dd>


<dt id="arg-start-day">start.day<a class="anchor" aria-label="anchor" href="#arg-start-day"></a></dt>
<dd><p>What day of the week should the <code>type = "weekday"</code> start on?
The user can change the start day by supplying an integer between 0 and 6.
Sunday = 0, Monday = 1, ... For example to start the weekday plots on a
Saturday, choose <code>start.day = 6</code>.</p></dd>


<dt id="arg-is-axis">is.axis<a class="anchor" aria-label="anchor" href="#arg-is-axis"></a></dt>
<dd><p>A logical (<code>TRUE</code>/<code>FALSE</code>), used to request shortened cut
labels for axes.</p></dd>


<dt id="arg-local-tz">local.tz<a class="anchor" aria-label="anchor" href="#arg-local-tz"></a></dt>
<dd><p>Used for identifying whether a date has daylight savings time
(DST) applied or not. Examples include <code>local.tz = "Europe/London"</code>,
<code>local.tz = "America/New_York"</code>, i.e., time zones that assume DST.
<a href="https://en.wikipedia.org/wiki/List_of_zoneinfo_time_zones" class="external-link">https://en.wikipedia.org/wiki/List_of_zoneinfo_time_zones</a> shows time
zones that should be valid for most systems. It is important that the
original data are in GMT (UTC) or a fixed offset from GMT.</p></dd>


<dt id="arg-latitude-longitude">latitude, longitude<a class="anchor" aria-label="anchor" href="#arg-latitude-longitude"></a></dt>
<dd><p>The decimal latitude and longitudes used when <code>type = "daylight"</code>. Note that locations west of Greenwich have negative
longitudes.</p></dd>


<dt id="arg-drop">drop<a class="anchor" aria-label="anchor" href="#arg-drop"></a></dt>
<dd><p>How to handle empty factor levels. One of:</p><ul><li><p><code>"default"</code>: Sensible defaults selected on a case-by-case basis for
different <code>type</code> options.</p></li>
<li><p><code>"empty"</code>: Drop all empty factor levels.</p></li>
<li><p><code>"none"</code>: Retain all empty factor levels, where possible. For example,
for <code>type = "hour"</code>, all factor levels from <code>0</code> and <code>23</code> will be
represented.</p></li>
<li><p><code>"outside"</code>: Retain empty factor levels within the range of the data.
For example, for <code>type = "hour"</code> when the data only contains data for 1 AM
and 5 AM, the factor levels, <code>1</code>, <code>2</code>, <code>3</code>, <code>4</code> and <code>5</code> will be retained.</p></li>
</ul><p>Some of these options only apply to certain <code>type</code> options. For example,
for <code>type = "year"</code>, <code>"outside"</code> is equivalent to <code>"none"</code> as there is no
fixed range of years to use in the <code>"none"</code> case.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>All additional parameters are passed on to next function(s).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns the data frame, <code>x</code>, with columns appended as defined by
<code>type</code> and <code>name</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This section give a brief description of each of the define levels of <code>type</code>.
Note that all time dependent types require a column <code>date</code>.</p><ul><li><p><code>"default"</code> does not split the data but will describe the levels as a date
range in the format "day month year".</p></li>
<li><p><code>"year"</code> splits the data by each year.</p></li>
<li><p><code>"month"</code> splits the data by month of the year.</p></li>
<li><p><code>"hour"</code> splits the data by hour of the day.</p></li>
<li><p><code>"monthyear"</code> splits the data by year and month. It differs from month in
that a level is defined for each month of the data set. This is useful
sometimes to show an ordered sequence of months if the data set starts half
way through a year; rather than starting in January.</p></li>
<li><p><code>"weekend"</code> splits the data by weekday and weekend.</p></li>
<li><p><code>"weekday"</code> splits the data by day of the week - ordered to start Monday.</p></li>
<li><p><code>"season"</code> splits data up by season. In the northern hemisphere winter =
December, January, February; spring = March, April, May etc. These
definitions will change of <code>hemisphere = "southern"</code>.</p></li>
<li><p><code>"seasonyear"</code> (or <code>"yearseason"</code>) will split the data into year-season
intervals, keeping the months of a season together. For example, December
2010 is considered as part of winter 2011 (with January and February 2011).
This makes it easier to consider contiguous seasons. In contrast, <code>type = "season"</code> will just split the data into four seasons regardless of the year.</p></li>
<li><p><code>"daylight"</code> splits the data relative to estimated sunrise and sunset to
give either daylight or nighttime. The cut is made by <code>cutDaylight</code> but more
conveniently accessed via <code>cutData</code>, e.g. <code>cutData(mydata, type = "daylight", latitude = my.latitude, longitude = my.longitude)</code>. The daylight estimation,
which is valid for dates between 1901 and 2099, is made using the measurement
location, date, time and astronomical algorithms to estimate the relative
positions of the Sun and the measurement location on the Earth's surface, and
is based on NOAA methods. Measurement location should be set using <code>latitude</code>
(+ to North; - to South) and <code>longitude</code> (+ to East; - to West).</p></li>
<li><p><code>"dst"</code> will split the data by hours that are in daylight saving time (DST)
and hours that are not for appropriate time zones. The option also requires
that the local time zone is given e.g. <code>local.tz = "Europe/London"</code>,
<code>local.tz = "America/New_York"</code>. Each of the two periods will be in
<em>local time</em>. The main purpose of this option is to test whether there
is a shift in the diurnal profile when DST and non-DST hours are compared.
This option is particularly useful with the <code><a href="timeVariation.html">timeVariation()</a></code> function. For
example, close to the source of road vehicle emissions, "rush-hour" will tend
to occur at the same <em>local time</em> throughout the year, e.g., 8 am and 5 pm.
Therefore, comparing non-DST hours with DST hours will tend to show similar
diurnal patterns (at least in the timing of the peaks, if not magnitude) when
expressed in local time. By contrast a variable such as wind speed or
temperature should show a clear shift when expressed in local time. In
essence, this option when used with <code><a href="timeVariation.html">timeVariation()</a></code> may help determine
whether the variation in a pollutant is driven by man-made emissions or
natural processes.</p></li>
<li><p><code>"wd"</code> splits the data by 8 wind sectors and requires a column <code>wd</code>: "NE",
"E", "SE", "S", "SW", "W", "NW", "N".</p></li>
</ul><p>Note that all the date-based types, e.g., <code>"month"</code>/<code>"year"</code> are derived from
a column <code>date</code>. If a user already has a column with a name of one of the
date-based types it will not be used.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>David Carslaw</p>
<p>Jack Davison</p>
<p>Karl Ropkins (<code>"daylight"</code> option)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># split data by day of the week</span></span></span>
<span class="r-in"><span><span class="va">mydata</span> <span class="op">&lt;-</span> <span class="fu">cutData</span><span class="op">(</span><span class="va">mydata</span>, type <span class="op">=</span> <span class="st">"weekday"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "date"    "ws"      "wd"      "nox"     "no2"     "o3"      "pm10"   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8] "so2"     "co"      "pm25"    "weekday"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 √ó 11</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   date                   ws    wd   nox   no2    o3  pm10   so2    co  pm25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 1998-01-01 <span style="color: #949494;">00:00:00</span>  0.6    280   285    39     1    29  4.72  3.37    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 1998-01-01 <span style="color: #949494;">01:00:00</span>  2.16   230    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    37 <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 1998-01-01 <span style="color: #949494;">02:00:00</span>  2.76   190    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>     3    34  6.83  9.60    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> 1998-01-01 <span style="color: #949494;">03:00:00</span>  2.16   170   493    52     3    35  7.66 10.2     <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> 1998-01-01 <span style="color: #949494;">04:00:00</span>  2.4    180   468    78     2    34  8.07  8.91    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> 1998-01-01 <span style="color: #949494;">05:00:00</span>  3      190   264    42     0    16  5.50  3.05    <span style="color: #BB0000;">NA</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ‚Ñπ 1 more variable: weekday &lt;ord&gt;</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Carslaw, Jack Davison, Karl Ropkins.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

